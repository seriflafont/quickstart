//*------------------------------------*\
//    $SMALL BREAKPOINT
//*------------------------------------*/

.feed {
    width: 100%;
    height: auto;
    overflow: hidden;
    .dark-hover {
        .bg-zoom {
            transition: transform 0.5s $bezier;
            &:before {
                display: block;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: $black;
                opacity: 0;
                transition: opacity 0.5s $bezier;
                content: '';
            }
        }
        &:hover{
            .bg-zoom:before{
                opacity:.2;
            }
        }
    }
    
    .arrow-hover {
        .arrow {
            opacity: 0;
            animation: 0.2s $bezier 0s forwards arrow-slideout;
        }
    
        &:hover, &:focus {
            .arrow {
                opacity: 1;
                animation: 0.2s $bezier 0s forwards arrow-slidein;
            }
        }
    }

    &-list-container {
        position:relative;
        z-index: 0;
        &:after {
            content: '';
            display: table;
            clear: both;
        }
    }

    // Individual feed items
    &-item {
        a{
            text-decoration: none;
        }
        position: relative;
        width: 100%;
        float: left;
        overflow: hidden;
        background-color: transparent;
        z-index: 1;
        // Animated feed depending from his position from the viewport
        .feed-item-content,
        .eyebrow,
        .headline {
            transition: all 0s 0s $bezier;
        }

        &.filler-tile {
            display: none;
            pointer-events: none;
        }

        // Technique to make containers with 2:1 aspect ratio
        &:before {
            content: '' !important; // For touch devices an highly specific CSS selector sets content: none, causing the feed items to not show up
            display: block;
            padding-top: 50%;
        }

        &.has-image {
            &:before {
                padding-top: 100%;
            }

            .feed-item-content-copy {
                //z-index: 1;
                height: 50%;
            }

            //@media screen and (max-width: '#{$medium-breakpoint - 1}px') and (orientation: portrait) {
            // Themes for all tiles with image only at SM breakpoint and orientation portrait
            .light-all {
                .eyebrow, .arrow, .headline, .subhead {
                    color: $white;
                }
            }

            .light-green {
                .eyebrow, .arrow {
                    color: $primary;
                }

                .headline {
                    color: $black;
                }

                .subhead {
                    color: $black;
                }
            }

            .dark-all {
                .eyebrow, .arrow {
                    color: $primary;
                }

                .headline {
                    color: $black;
                }

                .subhead {
                    color: $black;
                }
            }

            .dark-green {
                .eyebrow, .arrow {
                    color: $primary;
                }

                .headline {
                    color: $black;
                }

                .subhead {
                    color: $black;
                }
            }
            //}


            // Align text to top, selected by author
            .top-align {
                .feed-item-content-copy {
                    align-self: flex-start;
                }

                // Override the default alignment for large feed items
                .feed-item-content-background-image {
                    background-position: top;
                }
            }

            // Align to bottom, selected by author
            .bottom-align {
                .feed-item-content-copy {
                    align-self: flex-end;
                }

                // Override the default alignment for large feed items
                .feed-item-content-background-image {
                    background-position: bottom;
                }
            }
        }


        // Default hover scale for all feed items is 5%
        &:hover {
            .bg-zoom {
                transform: scale(1.05);
            }
            .feed-item-content-copy {
                &:before,
                &:after {
                    transform: translateY(-50%) scale(1.5);
                }
            }
        }

        &:not(.filler-tile) {
            &:target,
            &:active {
                filter: brightness(95%);
            }
        }

        // Container which has the content. This is styled to fill out the parent container.
        // Display is set to flex to allow the child (content-copy) to be aligned to top or bottom of container
        &-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;

        }

        // Container which holds the copy. Display is set to flex to allow the copy to be centered without using padding/margin.
        // Also change order of headlines
        &-content-copy {
            width: 100%;
            height: 100%;
            padding: 0 10%;
            
            position: relative;
            display: flex;
            flex-direction: column;
            flex-wrap: nowrap;
            text-align: center;
            align-items: center;
            justify-content: center;

            a {
                display: flex;
                flex-direction: column;
                flex-wrap: nowrap;
                text-align: center;
                align-items: center;
                justify-content: center;
                width:100%;
            }

            // Headline style
            .headline {
                order: 2;
                line-height: 1.2;
                letter-spacing: 0;
                font-family: $headFont;
                font-size:rem($sectionhead-fontsize);
                width: 100%;

                &:before {
                    content: none;
                }
            }

            // Eyebrow style
            .eyebrow {
                @extend .nav-a-style;
                order: 1;
                //font-size: $scale02;
                margin-bottom: 0.5rem;
                text-transform: uppercase;
                width: 100%;
                line-height: 1.2;
            }

            // Pointy arrows
            &:after, &:before {
                top: 50%;
                content: none;
                height: 0;
                width: 0;
                position: absolute;
                pointer-events: none;
                transform: translateY(-50%) scale(1);
                border-style: solid;
                border-color: transparent;
                transition: all 0.5s 0s $bezier;
            }

            &:before {
                left: -1.2em;
                border-width: 1em calc(1em * 1.3) 1em 0;
                transform-origin: right center;
            }

            &:after {
                right: -1.2em;
                border-width: 1em 0 1em calc(1em * 1.3);
                transform-origin: left center;
            }
        }

        // Background style
        &-content-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;

            &-image {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center;

                // Default alignment will be set for small feed items
                .top-align & {
                    background-position: bottom;
                }

                .bottom-align & {
                    background-position: top;
                }
            }
        }

        .arrow {
            order: 4;
            color: $primary;
            font-size:rem($mainnav-fontsize);
            margin-left: 0; // since tranform: translateX did not work, using margin-left: font-size /2
            position: absolute;
            margin-top: 1.5em;
            left: 50%;
        }


        // Themes

        &:nth-of-type(12n + 1) {
            &:not(.has-image) {
                @include feed-theme($feed-theme-light-gray);
            }
        }

        &:nth-of-type(12n + 2),
        &:nth-of-type(12n + 8) {
            @include feed-theme($feed-theme-white, false);
            &.has-image .feed-item-content-copy:after {
                border-left-color: $feed-theme-white;
            }
        }

        &:nth-of-type(12n + 3),
        &:nth-of-type(12n + 9) {
            @include feed-theme($feed-theme-white, false);
            &.has-image .feed-item-content-copy:before {
                border-right-color: $feed-theme-white;
            }
        }

        &:nth-of-type(12n + 4),
        &:nth-of-type(12n + 10) {
            @include feed-theme($feed-theme-white, false);
            &.has-image .feed-item-content-copy:after {
               border-left-color: $feed-theme-white;
            }
        }

        &:nth-of-type(12n + 5),
        &:nth-of-type(12n + 11) {
            @include feed-theme($feed-theme-white, false);
            &.has-image .feed-item-content-copy:before {
                border-right-color: $feed-theme-white;

            }
        }

        &:nth-of-type(12n + 6) {
            @include feed-theme($feed-theme-dark-gray);
        }

         &:nth-of-type(12n + 7) {
            @include feed-theme($feed-theme-light-gray);
        }

        &:nth-of-type(12n + 12) {
            @include feed-theme($feed-theme-dark-gray);
        }
    }

}